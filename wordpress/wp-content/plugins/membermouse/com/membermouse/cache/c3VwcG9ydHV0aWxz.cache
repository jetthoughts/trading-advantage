/**
 * 
 * MemberMouse(TM) (http://www.membermouse.com)
 * (c) MemberMouse, LLC. All rights reserved.
 */
class MM_SupportUtils
{
	public static function hasEmailSupport()
	{
		if(MM_MemberMouseService::hasPermission(MM_MemberMouseService::$SUPPORT_EMAIL))
		{
			return true;
		}
		return false;
	}
	
	public static function hasPhoneSupport()
	{
		if(MM_MemberMouseService::hasPermission(MM_MemberMouseService::$SUPPORT_PHONE))
		{
			return true;
		}
		return false;
	}
	
	public static function getSupportPin()
	{
		$pin = "";
		
		if(self::hasPhoneSupport())
		{
			$pin .= "P";
		}
		
		if(self::hasEmailSupport())
		{
			$pin .= "E";
		}
		
		$license = new MM_License();
		
		if($license->isValid())
		{
			$pin .= $license->getId();
			return $pin;
		}
		else
		{
			return "";
		}
	}
	
	public static function supportMenuItem($module)
	{
		$url = "http://support.membermouse.com";
		
		switch($module)
		{
			case MM_MODULE_API:
				$url .= "/customer/portal/articles/search?q=api";
				break;
				
			case MM_MODULE_PUSH_NOTIFICATIONS:
				$url .= "/customer/portal/articles/search?q=push+notifications";
				break;
				
			case MM_MODULE_WORDPRESS_HOOKS:
				$url .= "/customer/portal/articles/search?q=wordpress+hooks";
				break;
				
			case MM_MODULE_PHP_INTERFACE:
				$url .= "/customer/portal/articles/search?q=php+interface";
				break;
				
			case MM_MODULE_PAYMENT_METHODS:
				$url .= "/customer/portal/articles/search?q=payment+methods";
				break;
				
			case MM_MODULE_TEST_DATA:
				$url .= "/customer/portal/articles/search?q=test+data";
				break;
				
			case MM_MODULE_CHECKOUT_OTHER_SETTINGS:
				$url .= "/customer/portal/articles/search?q=checkout+settings";
				break;
				
			case MM_MODULE_CANCELLATION_METHOD:
				$url .= "/customer/portal/articles/search?q=cancellation+method";
				break;
				
			case MM_MODULE_AFFILIATE_INTEGRATION:
				$url .= "/customer/portal/articles/search?q=affiliate+integration";
				break;
				
			case MM_MODULE_COMMISSION_PROFILES:
				$url .= "/customer/portal/articles/search?q=commission+profiles";
				break;
				
			case MM_MODULE_AFFILIATE_TRACKING:
				$url .= "/customer/portal/articles/search?q=affiliate+tracking";
				break;
				
			case MM_MODULE_EMAIL_INTEGRATION:
				$url .= "/customer/portal/articles/search?q=email+integration";
				break;
				
			case MM_EMAIL_TEMPLATES:
				$url .= "/customer/portal/articles/search?q=email+templates";
				break;
				
			case MM_MODULE_MEMBERSHIP_LEVELS:
				$url .= "/customer/portal/articles/search?q=membership+levels";
				break;
				
			case MM_MODULE_BUNDLES:
				$url .= "/customer/portal/articles/search?q=bundles";
				break;
				
			case MM_MODULE_PRODUCTS:
				$url .= "/customer/portal/articles/search?q=products";
				break;
				
			case MM_MODULE_COUPONS:
				$url .= "/customer/portal/articles/search?q=coupons";
				break;
				
			case MM_MODULE_CUSTOM_FIELDS:
				$url .= "/customer/portal/articles/search?q=custom+fields";
				break;
				
			case MM_MODULE_COUNTRIES:
				$url .= "/customer/portal/articles/search?q=countries";
				break;
				
			case MM_MODULE_SHIPPING:
				$url .= "/customer/portal/articles/search?q=shipping+methods";
				break;
				
			case MM_MODULE_FREE_MEMBER_FORM:
				$url .= "/customer/portal/articles/search?q=free+member+webform";
				break;
				
			case MM_MODULE_LOGIN_FORM:
				$url .= "/customer/portal/articles/search?q=login+webform";
				break;
				
			case MM_MODULE_EMPLOYEES:
				$url .= "/customer/portal/articles/search?q=employees";
				break;
				
			case MM_MODULE_DRIP_CONTENT_SCHEDULE:
				$url .= "/customer/portal/articles/search?q=drip+content+schedule";
				break;
			
			case MM_MODULE_MEMBER_DETAILS_GENERAL:
				$url .= "/customer/portal/articles/search?q=manage+member+general";
				break;
				
			case MM_MODULE_MEMBER_DETAILS_ACCESS_RIGHTS:
				$url .= "/customer/portal/articles/search?q=manage+member+access+rights";
				break;
				
			case MM_MODULE_MEMBER_DETAILS_TRANSACTION_HISTORY:
				$url .= "/customer/portal/articles/search?q=manage+member+transaction+history";
				break;
				
			case MM_MODULE_MEMBER_DETAILS_CUSTOM_FIELDS:
				$url .= "/customer/portal/articles/search?q=manage+member+custom+fields";
				break;
				
			case MM_MODULE_MEMBER_DETAILS_BILLING_INFO:
				$url .= "/customer/portal/articles/search?q=manage+member+billing+information";
				break;
				
			case MM_MODULE_MEMBER_DETAILS_SHIPPING_INFO:
				$url .= "/customer/portal/articles/search?q=manage+member+shipping+information";
				break;
				
			case MM_MODULE_IMPORT_WIZARD:
				$url .= "/customer/portal/articles/search?q=import+wizard";
				break;
				
			case MM_MODULE_OTHER_SETTINGS:
			case MM_MODULE_VERSION_HISTORY:
			case MM_MODULE_REPAIR_MEMBERMOUSE:
			case MM_MODULE_REPAIR_INSTALL:
				break;
		}
		
		echo "<li class=\"floatr\">";
		echo "<a href=\"{$url}\" target=\"_blank\">Need help?</a>";
		
		if(self::hasEmailSupport() || self::hasPhoneSupport())
		{
			echo "<ul>";
			
			echo "<li><a href=\"{$url}\" target=\"_blank\">Support Center</a></li>";
				
			if(self::hasEmailSupport())
			{
				echo "<li><a href=\"http://support.membermouse.com/customer/portal/emails/new\" target=\"_blank\">Email Us</a></li>";
			}
			
			if(self::hasPhoneSupport())
			{
				echo "<li><a href=\"#\">(512) 630-2219</a></li>";
			}
			
			echo "</ul>";
		}
		
		echo "</li>";
	}
}
